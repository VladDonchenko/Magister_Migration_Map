{"ast":null,"code":"import React,{useState}from'react';import{Box,Tabs,Tab,Paper,Typography,TextField,Button,Grid,Alert}from'@mui/material';import{DatePicker}from'@mui/x-date-pickers/DatePicker';import{LocalizationProvider}from'@mui/x-date-pickers/LocalizationProvider';import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import{uk}from'date-fns/locale';import{migrationApi}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index,...other}=props;return/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",hidden:value!==index,id:`upload-tabpanel-${index}`,\"aria-labelledby\":`upload-tab-${index}`,...other,children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:children})});}const UploadData=()=>{const[tabValue,setTabValue]=useState(0);const[formData,setFormData]=useState({first_name:'',last_name:'',age:'',from_country:'',to_country:'',date:null,reason:'',gender:'',education:'',profession:'',family_status:'',duration:'',migration_type:''});const[file,setFile]=useState(null);const[message,setMessage]=useState(null);const handleTabChange=(event,newValue)=>{setTabValue(newValue);};const handleFormChange=event=>{setFormData({...formData,[event.target.name]:event.target.value});};const handleFileUpload=event=>{if(event.target.files&&event.target.files[0]){setFile(event.target.files[0]);}};const handleSubmit=async event=>{event.preventDefault();try{if(!file){throw new Error('Файл не выбран');}const response=await migrationApi.uploadCsv(file);if(response.ok){setMessage({type:'success',text:'Data uploaded successfully'});setFormData({first_name:'',last_name:'',age:'',from_country:'',to_country:'',date:null,reason:'',gender:'',education:'',profession:'',family_status:'',duration:'',migration_type:''});}else{setMessage({type:'error',text:'Error uploading data'});}}catch(error){setMessage({type:'error',text:'Error uploading data'});}};return/*#__PURE__*/_jsx(Box,{sx:{width:'100%'},children:/*#__PURE__*/_jsxs(Paper,{sx:{width:'100%',mb:2},children:[/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,indicatorColor:\"primary\",textColor:\"primary\",centered:true,children:[/*#__PURE__*/_jsx(Tab,{label:\"Manual Input\"}),/*#__PURE__*/_jsx(Tab,{label:\"File Upload\"}),/*#__PURE__*/_jsx(Tab,{label:\"Generate Data\"})]}),message&&/*#__PURE__*/_jsx(Alert,{severity:message.type,sx:{mt:2},children:message.text}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"First Name\",name:\"first_name\",value:formData.first_name,onChange:handleFormChange,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Last Name\",name:\"last_name\",value:formData.last_name,onChange:handleFormChange,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Age\",name:\"age\",type:\"number\",value:formData.age,onChange:handleFormChange,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,adapterLocale:uk,children:/*#__PURE__*/_jsx(DatePicker,{label:\"Migration Date\",value:formData.date,onChange:newValue=>{setFormData({...formData,date:newValue});},slotProps:{textField:{fullWidth:true}}})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",children:\"Submit\"})})]})})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:1,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsx(\"input\",{accept:\".csv,.xlsx\",style:{display:'none'},id:\"raised-button-file\",type:\"file\",onChange:handleFileUpload}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"raised-button-file\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:\"span\",children:\"Upload File\"})}),file&&/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Selected file: \",file.name]})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:2,children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Data generation form will be implemented here\"})})]})});};export default UploadData;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}